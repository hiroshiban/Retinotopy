<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of MakeOval</title>
  <meta name="keywords" content="MakeOval">
  <meta name="description" content="Generates an oval image.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # Retinotopy --><!-- menu.html Common -->
<h1>MakeOval
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Generates an oval image.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function img=MakeOval(imsize,color,bgcolor,bg_expand_ratio,show_flag,save_flag) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../hb_brain.png); background-position:right top"><pre class="comment"> Generates an oval image.
 function img=MakeOval(imsize,color,bgcolor,show_flag,save_flag)

 This function generates an oval image
 
 [input]
 imsize   : size of the oval, [raw_pix,col_pix]
 color    : color of the oval, [r,g,b]
 bgcolor  : color of the background, [r,g,b]
 bg_expand_ratio : expand ratio of backgound
            if 1, the generated image is the same size with imsize
            if more than 1, the edge of background is expanded
            and generated image size will be imsize*bg_expand_ratio
            defaul value is 1
 show_flag: if 1, the generated images are displayed. [1/0]
 save_flag: if 1, the generated images are saved. [1/0]

 [output]
 img      : oval image, [row x col x rgba]

 Created    : &quot;2010-06-11 10:44:46 ban&quot;
 Last Update: &quot;2013-11-22 23:39:30 ban (ban.hiroshi@gmail.com)&quot;</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../hb_brain.png); background-position:right top">
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
</div>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment" style="background-image:url(../../hb_brain.png); background-position:right top"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function img=MakeOval(imsize,color,bgcolor,bg_expand_ratio,show_flag,save_flag)</a>
0002 
0003 <span class="comment">% Generates an oval image.</span>
0004 <span class="comment">% function img=MakeOval(imsize,color,bgcolor,show_flag,save_flag)</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% This function generates an oval image</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% [input]</span>
0009 <span class="comment">% imsize   : size of the oval, [raw_pix,col_pix]</span>
0010 <span class="comment">% color    : color of the oval, [r,g,b]</span>
0011 <span class="comment">% bgcolor  : color of the background, [r,g,b]</span>
0012 <span class="comment">% bg_expand_ratio : expand ratio of backgound</span>
0013 <span class="comment">%            if 1, the generated image is the same size with imsize</span>
0014 <span class="comment">%            if more than 1, the edge of background is expanded</span>
0015 <span class="comment">%            and generated image size will be imsize*bg_expand_ratio</span>
0016 <span class="comment">%            defaul value is 1</span>
0017 <span class="comment">% show_flag: if 1, the generated images are displayed. [1/0]</span>
0018 <span class="comment">% save_flag: if 1, the generated images are saved. [1/0]</span>
0019 <span class="comment">%</span>
0020 <span class="comment">% [output]</span>
0021 <span class="comment">% img      : oval image, [row x col x rgba]</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% Created    : &quot;2010-06-11 10:44:46 ban&quot;</span>
0024 <span class="comment">% Last Update: &quot;2013-11-22 23:39:30 ban (ban.hiroshi@gmail.com)&quot;</span>
0025 
0026 <span class="comment">% check input variables</span>
0027 <span class="keyword">if</span> nargin &lt; 1, imsize=[32,32]; <span class="keyword">end</span>
0028 <span class="keyword">if</span> nargin &lt; 2, color=[255,255,255]; <span class="keyword">end</span>
0029 <span class="keyword">if</span> nargin &lt; 3, bgcolor=[128,128,128]; <span class="keyword">end</span>
0030 <span class="keyword">if</span> nargin &lt; 4, bg_expand_ratio=1; <span class="keyword">end</span>
0031 <span class="keyword">if</span> nargin &lt; 5, show_flag=1; <span class="keyword">end</span>
0032 <span class="keyword">if</span> nargin &lt; 6, save_flag=0; <span class="keyword">end</span>
0033 
0034 <span class="keyword">if</span> numel(imsize)==1, imsize=[imsize,imsize]; <span class="keyword">end</span>
0035 <span class="keyword">if</span> numel(color)==1, color=[color,color,color]; <span class="keyword">end</span>
0036 <span class="keyword">if</span> numel(bgcolor)==1, bgcolor=[bgcolor,bgcolor,bgcolor]; <span class="keyword">end</span>
0037 <span class="keyword">if</span> bg_expand_ratio&lt;1, bg_expand_ratio=1; <span class="keyword">end</span>
0038 
0039 <span class="comment">% color values check</span>
0040 <span class="keyword">if</span> max(color)&gt;255 || min(color)&lt;0
0041     error(<span class="string">'color values error. color should be set 0-255'</span>);
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% adjust size</span>
0045 imsize=imsize/2;
0046 <span class="keyword">if</span> mod(imsize,2), imsize=imsize+1; <span class="keyword">end</span>
0047 
0048 oimsize=round(imsize.*bg_expand_ratio);
0049 <span class="keyword">if</span> mod(oimsize,2), oimsize=oimsize+1; <span class="keyword">end</span>
0050 
0051 <span class="comment">% dissociate inner/outer region of the oval</span>
0052 [x,y]=meshgrid(-oimsize(2):oimsize(2),-oimsize(1):oimsize(1));
0053 idx=logical( 1&gt;=( x.^2/imsize(2).^2 + y.^2/imsize(1).^2 ) );
0054 idxbg=logical( 1&lt;( x.^2/imsize(2).^2 + y.^2/imsize(1).^2 ) );
0055 
0056 <span class="comment">% generate oval image</span>
0057 img=zeros(size(x,1),size(x,2),4);
0058 tmp=zeros(size(x));
0059 <span class="keyword">for</span> ii=1:1:3
0060   tmp(idxbg)=bgcolor(ii);
0061   tmp(idx)=color(ii);
0062   img(:,:,ii)=tmp;
0063 <span class="keyword">end</span>
0064 alphac=zeros(size(x)); alphac(idx)=255;
0065 img(:,:,4)=alphac;
0066 
0067 <span class="comment">%img=uint8(img);</span>
0068 
0069 <span class="comment">% show image</span>
0070 <span class="keyword">if</span> show_flag
0071   figure;
0072   imid=imshow(uint8(img(:,:,1:3)));
0073   set(imid,<span class="string">'AlphaData'</span>,double(img(:,:,4)./255));
0074   axis off;
0075 <span class="keyword">end</span>
0076 
0077 <span class="comment">% save image data</span>
0078 <span class="keyword">if</span> save_flag
0079   save oval.mat img;
0080 <span class="keyword">end</span>
0081 
0082 <span class="keyword">return</span></pre></div>
<hr><address>Generated on Tue 03-Aug-2021 14:14:51 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005 using a BVQX_hbtools customized template</address>
</body>
</html>